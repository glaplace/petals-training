<?xml version="1.0" encoding="UTF-8"?>

<jbi:jbi
    xmlns:jbi="http://java.sun.com/xml/ns/jbi"
    xmlns:cdk="http://petals.ow2.org/components/extensions/version-5"
    xmlns:petals-se-flowable="http://petals.ow2.org/components/petals-se-flowable/1.0"
    xmlns:metier="http://ausy.fr/training/petals/bibliotheque/ajouter/metier/1.0"
    xmlns:technique="http://ausy.fr/training/petals/bibliotheque/ajouter/technique/1.0"
    xmlns:notifier="http://ausy.fr/training/petals/modele/bibliotheque/notifier/1.0"
    version="1.0">

    <jbi:services binding-component="false">

        <jbi:provides
            interface-name="metier:Ajouter"
            service-name="metier:AjouterService"
            endpoint-name="autogenerate">
            <!-- WSDL file -->
            <cdk:wsdl>processus-ajout.wsdl</cdk:wsdl>
        </jbi:provides>

        <jbi:consumes interface-name="notifier:NotifierMail"
                      service-name="notifier:NotifierMailService">
            <cdk:mep>InOut</cdk:mep>
            <cdk:operation>notifier:notifier</cdk:operation>
            <cdk:timeout>360000</cdk:timeout>
        </jbi:consumes>

        <jbi:consumes interface-name="technique:AjouterLivreTechnique"
                      service-name="technique:AjouterlLivreService">
            <cdk:mep>InOut</cdk:mep>
            <cdk:operation>technique:livreExiste</cdk:operation>
            <cdk:timeout>360000</cdk:timeout>
        </jbi:consumes>
        <jbi:consumes interface-name="technique:AjouterLivreTechnique"
                      service-name="technique:AjouterlLivreService">
            <cdk:mep>InOut</cdk:mep>
            <cdk:operation>technique:obtenirLivre</cdk:operation>
            <cdk:timeout>360000</cdk:timeout>
        </jbi:consumes>

        <jbi:consumes interface-name="technique:AjouterLivreTechnique"
                      service-name="technique:AjouterlLivreService">
            <cdk:mep>InOnly</cdk:mep>
            <cdk:operation>technique:sauvegarderLivre</cdk:operation>
            <cdk:timeout>360000</cdk:timeout>
        </jbi:consumes>

        <!-- SE Flowable specific fields -->
        <petals-se-flowable:tenant_id>ausy-training</petals-se-flowable:tenant_id>
        <petals-se-flowable:category_id>biblitotheque</petals-se-flowable:category_id>

        <!-- Processus Ajout -->
        <petals-se-flowable:process_file1>ajouter-livre.bpmn20.xml</petals-se-flowable:process_file1>
        <petals-se-flowable:version1>1</petals-se-flowable:version1>


    </jbi:services>
</jbi:jbi>
