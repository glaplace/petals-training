<?xml version="1.0" encoding="UTF-8"?>

<jbi:jbi
    xmlns:cdk="http://petals.ow2.org/components/extensions/version-5"
    xmlns:jbi="http://java.sun.com/xml/ns/jbi"
    xmlns:camel="http://petals.ow2.org/components/petals-se-camel/jbi/version-1.0"
    xmlns:emprunter="http://ausy.fr/training/petals/bibliotheque/emprunter/technique/1.0"
    xmlns:sql="http://petals.ow2.org/components/sql/version-1"
    xmlns:sql-bibli="http://ausy.fr/training/petals/modele/bibliotheque/1.0/sql"
    version="1.0">

    <jbi:services binding-component="false">
        <jbi:provides interface-name="emprunter:EmprunterLivreTechnique"
                      service-name="emprunter:EmprunterlLivreService"
                      endpoint-name="autogenerate">
            <cdk:wsdl>emprunter-livre.wsdl</cdk:wsdl>
        </jbi:provides>

        <jbi:consumes interface-name="sql:SQLInterface" service-name="sql-bibli:BibliothequeSQLService">
            <cdk:mep>InOut</cdk:mep>
            <cdk:operation>sql:select</cdk:operation>
            <cdk:timeout>360000</cdk:timeout>
            <camel:service-id>sql-select</camel:service-id>
        </jbi:consumes>

        <jbi:consumes interface-name="sql:SQLInterface" service-name="sql-bibli:BibliothequeSQLService">
            <cdk:mep>InOnly</cdk:mep>
            <cdk:operation>sql:insertWithResponse</cdk:operation>
            <cdk:timeout>360000</cdk:timeout>
            <camel:service-id>sql-insert</camel:service-id>
        </jbi:consumes>

        <jbi:consumes interface-name="sql:SQLInterface" service-name="sql-bibli:BibliothequeSQLService">
            <cdk:mep>InOut</cdk:mep>
            <cdk:operation>sql:updateWithResponse</cdk:operation>
            <cdk:timeout>360000</cdk:timeout>
            <camel:service-id>sql-update</camel:service-id>
        </jbi:consumes>

        <camel:java-routes>fr.ausy.traing.petals.services.techniques.emprunter.operation.AjouterEmpruntOperation</camel:java-routes>
        <camel:java-routes>fr.ausy.traing.petals.services.techniques.emprunter.operation.EnregistrerRetourOperation</camel:java-routes>
        <camel:java-routes>fr.ausy.traing.petals.services.techniques.emprunter.operation.LivreDejaEmprunteOperation</camel:java-routes>

    </jbi:services>
</jbi:jbi>
